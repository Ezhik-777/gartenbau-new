<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />            
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover">
  <title>Gartenbau Remseck | Landschaftsbau Stuttgart | Garten Ludwigsburg | Waiblingen</title>
  <meta name="description" content="Professioneller Gartenbau in Remseck, Stuttgart, Ludwigsburg & Waiblingen. Gartengestaltung, Terrassen, Natursteinarbeiten. Kostenlose Beratung vor Ort. Jetzt anfragen!">
  <meta name="keywords" content="garten remseck, garten ludwigsburg, garten stuttgart, garten waiblingen, landschaftsbau stuttgart, gartenbau kornwestheim, terrassen fellbach, natursteinarbeiten esslingen, pflasterarbeiten böblingen, gartenbau backnang">
  <meta name="author" content="Gartenbau Z.M.">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://gartenbauzm.de/">
  <meta property="og:title" content="Gartenbau Z.M. - Professioneller Garten- und Landschaftsbau">
  <meta property="og:description" content="Professioneller Gartenbau in Remseck, Stuttgart, Ludwigsburg & Waiblingen. Gartengestaltung, Terrassen, Natursteinarbeiten. Kostenlose Beratung vor Ort.">
  <meta property="og:image" content="https://gartenbauzm.de/img/gal-1.webp">
  <meta property="og:locale" content="de_DE">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://gartenbauzm.de/">
  <meta property="twitter:title" content="Gartenbau Z.M. - Lokaler Garten- und Landschaftsbau Experte">
  <meta property="twitter:description" content="Professioneller Gartenbau in Remseck, Stuttgart, Ludwigsburg & Waiblingen. Kostenlose Beratung vor Ort.">
  <meta property="twitter:image" content="https://gartenbauzm.de/img/gal-1.webp">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://formspree.io; frame-src https://wa.me;">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  
  <!-- Favicon optimized -->
  <link rel="icon" type="image/webp" sizes="32x32" href="/img/logo.webp">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/logo.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#459d72">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  
  <!-- Performance optimizations -->
  <meta http-equiv="X-DNS-Prefetch-Control" content="on">
  
  <!-- Critical CSS inline для мгновенного FCP -->
  <style>
/* Critical CSS для быстрого FCP - минимальные стили для above-the-fold */

/* Reset и базовые стили */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  line-height: 1.4;
  color: #333;
  background: #fff;
}

/* Skip links */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #000;
  color: #fff;
  padding: 8px;
  text-decoration: none;
  z-index: 10000;
}

.skip-link:focus {
  top: 0;
}

/* Wrapper */
.wrapper {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Header критичные стили */
.head {
  background: #fff;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  height: 80px;
}

.contain {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.head__row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 80px;
}

.logo {
  font-size: 24px;
  font-weight: bold;
  color: #459d72;
  text-decoration: none;
}

/* Navigation */
.head__mn-ul {
  display: flex;
  list-style: none;
  gap: 30px;
}

.head__mn-ul a {
  color: #333;
  text-decoration: none;
  font-weight: 500;
}

.top__phone {
  color: #459d72;
  text-decoration: none;
  font-weight: 600;
}

/* Burger menu */
.burger {
  display: none;
  background: none;
  border: none;
  width: 30px;
  height: 30px;
  flex-direction: column;
  justify-content: space-around;
  cursor: pointer;
}

.burger span {
  display: block;
  width: 25px;
  height: 3px;
  background: #333;
}

/* Banner критичные стили */
.banner {
  background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3));
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  min-height: 100vh;
  display: flex;
  align-items: center;
  color: white;
  text-align: center;
  margin-top: 80px;
  position: relative;
  z-index: 1;
}

/* Современный background-image с WebP поддержкой */
.banner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: url('img/bg-top.webp');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  z-index: -2;
}

/* Fallback для браузеров без WebP */
.no-webp .banner::before {
  background-image: url('img/bg-top.jpg');
}

.hero-content {
  width: 100%;
}

.bg__top-title {
  font-size: clamp(2rem, 5vw, 4rem);
  margin-bottom: 2rem;
}

.hero-brand {
  display: block;
  font-weight: 900;
  margin-bottom: 0.5rem;
}

.hero-subtitle {
  display: block;
  font-weight: 400;
  font-size: 0.8em;
  margin-bottom: 0.5rem;
}

.hero-location {
  display: block;
  font-size: 0.6em;
  opacity: 0.9;
}

/* Preloader */
#mainPreloader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #459d72, #367a5c);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}

.preloader-content {
  text-align: center;
  color: white;
}

.preloader-logo {
  font-size: 2rem;
  margin-bottom: 1rem;
}

/* Mobile критичные стили */
@media (max-width: 768px) {
  .head__mn-ul {
    display: none;
  }
  
  .burger {
    display: flex;
  }
  
  .banner {
    background-attachment: scroll;
    min-height: 80vh;
  }
  
  .bg__top-title {
    font-size: clamp(1.5rem, 8vw, 2.5rem);
  }
}

/* Focus стили */
a:focus, button:focus {
  outline: 3px solid #459d72;
  outline-offset: 2px;
}
  </style>
  
  <!-- Preload critical resources -->
  <link rel="preload" href="img/bg-top.webp" as="image" type="image/webp">
  <link rel="preload" href="img/bg-top.jpg" as="image">
  <link rel="preload" href="js/jquery-3.4.1.min.js" as="script">
  
  <!-- Resource hints для лучшей производительности -->
  <link rel="dns-prefetch" href="//formspree.io">
  <link rel="dns-prefetch" href="//wa.me">
  <link rel="preconnect" href="https://formspree.io" crossorigin>
  
  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Gartenbau Z.M.",
    "description": "Professioneller Gartenbau und Landschaftsbau in Remseck am Neckar",
    "url": "https://gartenbauzm.de/",
    "telephone": "+49 178 2747470",
    "email": "info.gartenbauzm@gmx.de",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Lerchenrain 9",
      "addressLocality": "Remseck am Neckar",
      "postalCode": "71686",
      "addressCountry": "DE"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "48.8951",
      "longitude": "9.2742"
    },
    "openingHours": "Mo-Fr 08:00-18:00",
    "serviceArea": [
      {
        "@type": "Place",
        "name": "Remseck am Neckar"
      },
      {
        "@type": "Place", 
        "name": "Stuttgart"
      },
      {
        "@type": "Place",
        "name": "Ludwigsburg"
      },
      {
        "@type": "Place",
        "name": "Waiblingen"
      },
      {
        "@type": "Place",
        "name": "Kornwestheim"
      },
      {
        "@type": "Place",
        "name": "Fellbach"
      },
      {
        "@type": "Place",
        "name": "Esslingen"
      },
      {
        "@type": "Place",
        "name": "Böblingen"
      },
      {
        "@type": "Place",
        "name": "Backnang"
      }
    ],
    "areaServed": "Baden-Württemberg",
    "priceRange": "€€",
    "paymentAccepted": "Cash, Bank Transfer",
    "services": [
      "Gartengestaltung",
      "Natursteinarbeiten",
      "Betonsteinarbeiten", 
      "Terrassen",
      "Wege und Zufahrten",
      "Landschaftsbau",
      "Pflasterarbeiten",
      "Hausmeisterservice",
      "Erdarbeiten",
      "Baggerarbeiten"
    ],
    "keywords": "garten remseck, garten ludwigsburg, garten stuttgart, garten waiblingen, landschaftsbau stuttgart, gartenbau kornwestheim, terrassen fellbach, natursteinarbeiten esslingen, pflasterarbeiten böblingen, gartenbau backnang"
  }
  </script>
  <!-- Async load non-critical CSS -->
  <link rel="preload" href="css/optimized.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="css/main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="css/improvements.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="css/accessibility.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="css/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="css/slick.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  
  <!-- Fallback for no-JS -->
  <noscript>
    <link rel="stylesheet" href="css/optimized.css">
    <link rel="stylesheet" href="css/modern-design.css">
    <link rel="stylesheet" href="css/improvements.css">
    <link rel="stylesheet" href="css/accessibility.css">
    <link rel="stylesheet" href="css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="css/slick.css">
  </noscript>
  
  <!-- Optimized Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  </noscript>
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
  <!-- Skip Links für Barrierefreiheit -->
  <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>
  <a href="#navigation" class="skip-link">Zur Navigation springen</a>
  <!-- Main Preloader -->
  <div id="mainPreloader">
    <div class="preloader-content">
      <div class="preloader-logo">🌿 Gartenbau Z.M.</div>
      <div class="preloader-text">Willkommen bei Ihrem Garten-Experten<div class="loading-dots"><span>.</span><span>.</span><span>.</span></div></div>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="progress-percentage" id="progressPercentage">0%</div>
    </div>
  </div>

  <div class="wrapper">
    <header class="head" id="top" role="banner">
  <div class="contain">
    <div class="head__row">
      <a href="./index.html" class="logo">Gartenbau Z.M.</a>
      <div class="header__col">
        <nav id="navigation" role="navigation" aria-label="Hauptnavigation">
        <ul class="head__mn-ul" role="menubar">
          <li role="menuitem"><a href="./index.html" aria-current="page">HOME</a></li>
          <li role="menuitem"><a href="#Leistungen">LEISTUNGEN</a></li>
          <li role="menuitem"><a href="#Ueber-uns">ÜBER UNS</a></li>
          <li role="menuitem"><a href="#Projekte">PROJEKTE</a></li>
          <li role="menuitem"><a href="#Kontakt">KONTAKT</a></li>
        </ul>
        </nav>
        <a href="https://wa.me/+491782747470" class="top__phone">+49 178 2747470</a>
      </div>
      <button class="burger" aria-expanded="false" aria-controls="navigation" aria-label="Menü öffnen">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</header>
    <section class="hero" role="banner">
      <div class="contain">
        <div class="hero__content">
          <h1 class="hero__title">
            Professioneller Garten- und Landschaftsbau in Stuttgart
          </h1>
          <p class="hero__subtitle">
            Von kreativer Gartengestaltung bis zu hochwertigen Natursteinarbeiten – wir verwirklichen Ihre Träume in Remseck, Ludwigsburg & Waiblingen
          </p>
          <div class="hero__buttons">
            <a href="#Kontakt" class="btn btn-primary">🌿 Kostenlose Beratung</a>
            <a href="#Projekte" class="btn btn-secondary">📸 Unsere Projekte</a>
          </div>
        </div>
      </div>
    </section>
    <main class="main" id="main-content" role="main">
      <section class="section" id="Ueber-uns">
        <div class="contain">
          <div class="section__header">
            <h2 class="section__title">Gartenbau Remseck - Ihr Partner für Gartengestaltung Stuttgart</h2>
            <p class="section__subtitle">
              Professioneller Gartenbau Remseck und Landschaftsbau Stuttgart. Spezialisiert auf Garten Ludwigsburg und Garten Waiblingen.
            </p>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: center;">
            <div>
              <p>Von kreativer Gartengestaltung bis zu hochwertigen Natursteinarbeiten – wir verwirklichen Ihre Träume mit über 15 Jahren Erfahrung in der Region Stuttgart.</p>
              <p><strong>Kostenlose Beratung vor Ort</strong> in Kornwestheim, Fellbach, Esslingen und der gesamten Region Stuttgart.</p>
              <div style="margin-top: 2rem;">
                <a href="#Kontakt" class="btn btn-primary">🏡 Jetzt Beratung anfragen</a>
              </div>
            </div>
            <div>
              <picture>
                <source srcset="img/ihr.webp" type="image/webp">
                <img src="img/ihr.jpg" alt="Gartenbau Remseck - Professioneller Landschaftsbau Stuttgart Ludwigsburg Waiblingen" width="600" height="400" loading="lazy" style="width: 100%; height: auto; border-radius: 12px; box-shadow: 0 8px 30px rgba(45, 90, 61, 0.2);">
              </picture>
            </div>
          </div>
        </div>
      </section>
      <section class="section" id="Leistungen">
        <div class="contain">
          <div class="section__header">
            <h2 class="section__title">Garten- und Landschaftsbau Leistungen für Stuttgart & Umgebung</h2>
            <p class="section__subtitle">Kompletter Gartenbau Stuttgart und Landschaftsbau für Remseck, Ludwigsburg, Waiblingen</p>
          </div>
          <div class="services-grid">
            <div class="service-card">
              <div class="service-card__icon">🌿</div>
              <h3 class="service-card__title">Gartengestaltung</h3>
              <p>Professionelle Gartenplanung und -gestaltung für Remseck, Stuttgart, Ludwigsburg und Waiblingen. Von der Idee bis zur Umsetzung.</p>
              <picture>
                <source srcset="img/gal-1.webp" type="image/webp">
                <img src="img/gal-1.jpg" alt="Gartengestaltung Remseck Stuttgart Ludwigsburg" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🏗️</div>
              <h3 class="service-card__title">Natursteinarbeiten</h3>
              <p>Hochwertige Natur- und Betonsteinarbeiten. Mauern, Treppen, Eingangsbereiche und mehr für Stuttgart und Umgebung.</p>
              <picture>
                <source srcset="img/gal-2.webp" type="image/webp">
                <img src="img/gal-2.jpg" alt="Natursteinarbeiten Stuttgart Waiblingen" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🛤️</div>
              <h3 class="service-card__title">Wege und Zufahrten</h3>
              <p>Professionelle Pflasterarbeiten für Zufahrten, Gartenwege und Einfahrten in Ludwigsburg, Böblingen und Remseck.</p>
              <picture>
                <source srcset="img/gal-3.webp" type="image/webp">
                <img src="img/gal-3.jpg" alt="Pflasterarbeiten Ludwigsburg Böblingen" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🏡</div>
              <h3 class="service-card__title">Terrassen & Plätze</h3>
              <p>Moderne Terrassengestaltung und Plätze für Outdoor-Living. Terrassenbau in Waiblingen, Fellbach und Stuttgart.</p>
              <picture>
                <source srcset="img/gal-4.webp" type="image/webp">
                <img src="img/gal-4.jpg" alt="Terrassen bauen Waiblingen Fellbach" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🔧</div>
              <h3 class="service-card__title">Hausmeisterservice</h3>
              <p>Zuverlässiger Hausmeisterservice und Gartenservice für Stuttgart, Remseck, Ludwigsburg und Waiblingen.</p>
              <picture>
                <source srcset="img/gal-5.webp" type="image/webp">
                <img src="img/gal-5.jpg" alt="Hausmeisterservice Stuttgart Remseck" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🛡️</div>
              <h3 class="service-card__title">Sichtschutz</h3>
              <p>Individuelle Sichtschutzlösungen, Mauern und Zäune für Ihre Privatsphäre in Stuttgart, Remseck und Ludwigsburg.</p>
              <picture>
                <source srcset="img/gal-6.webp" type="image/webp">
                <img src="img/gal-6.jpg" alt="Sichtschutz Stuttgart Remseck" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🚜</div>
              <h3 class="service-card__title">Erdarbeiten</h3>
              <p>Professionelle Erd- und Baggerarbeiten für alle Projekte in Stuttgart, Backnang, Remseck und Ludwigsburg.</p>
              <picture>
                <source srcset="img/gal-7.webp" type="image/webp">
                <img src="img/gal-7.jpg" alt="Erdarbeiten Stuttgart Backnang" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
            
            <div class="service-card">
              <div class="service-card__icon">🌱</div>
              <h3 class="service-card__title">Rollrasen</h3>
              <p>Professionelles Rollrasen verlegen und Rasen anlegen in Stuttgart, Esslingen, Remseck und Ludwigsburg.</p>
              <picture>
                <source srcset="img/gal-8.webp" type="image/webp">
                <img src="img/gal-8.jpg" alt="Rollrasen verlegen Stuttgart Esslingen" width="300" height="200" loading="lazy" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-top: 1rem;">
              </picture>
            </div>
          </div>
        </div>
      </div>
      <section class="section" id="Projekte">
        <div class="contain">
          <div class="section__header">
            <h2 class="section__title">Gartenbau Projekte in Remseck, Ludwigsburg & Stuttgart</h2>
            <p class="section__subtitle">Entdecken Sie unsere erfolgreich realisierten Projekte in der Region Stuttgart</p>
          </div>
        </div>

<div class="projecs__contain">
  <!-- Прелоадер -->
  <div id="loader" style="text-align:center; padding: 2rem; color: #459d72; font-size: 1.1rem;">📸 Fotos werden geladen...</div>

  <!-- Галерея -->
  <div id="galleryContainer" class="modern-gallery" style="display:none;"></div>
  
  <!-- Пагинация -->
  <div id="pagination" style="display:none; text-align:center; margin-top: 30px;">
    <button id="prevPage" class="pagination-btn">← Zurück</button>
    <span id="pageInfo" style="margin: 0 20px; color: #666;"></span>
    <button id="nextPage" class="pagination-btn">Nächste →</button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const gallery = document.getElementById('galleryContainer');
    const loader = document.getElementById('loader');
    const pagination = document.getElementById('pagination');
    
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');
    const pageInfo = document.getElementById('pageInfo');

    const totalImages = 180;
    let currentPage = 1;
    const imagesPerPage = 12;
    let loadedImageCount = 0;
    
    // Устанавливаем режим загрузки галереи в прелоадере
    if (typeof window.setGalleryLoadingMode === 'function') {
      window.setGalleryLoadingMode(imagesPerPage);
    }
    
    // Создаем плейсхолдеры с lazy loading
    function createImageElement(imageNumber) {
      const imgSrc = `img/image_${imageNumber}.webp`;
      const a = document.createElement('a');
      a.href = imgSrc;
      a.className = 'gallery-item';
      a.setAttribute('data-fancybox', 'gallery2');

      const img = document.createElement('img');
      img.dataset.src = imgSrc;
      img.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="200"%3E%3Crect width="100%25" height="100%25" fill="%23f0f0f0"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3ELaden...%3C/text%3E%3C/svg%3E';
      img.loading = 'lazy';
      img.decoding = 'async';
      img.alt = `Foto von unserem Projekt ${imageNumber}`;
      img.style.transition = 'opacity 0.3s ease';
      img.style.opacity = '0.7';
      
      // Отслеживаем загрузку изображения для прелоадера
      img.addEventListener('load', function() {
        loadedImageCount++;
        this.style.opacity = '1';
        this.removeAttribute('data-src');
        if (typeof window.incrementGalleryProgress === 'function') {
          window.incrementGalleryProgress();
        }
      });
      
      img.addEventListener('error', function() {
        loadedImageCount++;
        this.style.opacity = '0.5';
        this.alt = `Изображение ${imageNumber} недоступно`;
        if (typeof window.incrementGalleryProgress === 'function') {
          window.incrementGalleryProgress();
        }
      });
      
      a.appendChild(img);
      return a;
    }
    
    // Оптимизированный Intersection Observer для lazy loading
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          const src = img.dataset.src;
          if (src) {
            // Используем Image объект для более быстрой загрузки
            const imageLoader = new Image();
            imageLoader.onload = function() {
              img.src = src;
              img.removeAttribute('data-src');
            };
            imageLoader.onerror = function() {
              img.src = src; // всё равно устанавливаем src
              img.removeAttribute('data-src');
            };
            imageLoader.src = src;
            observer.unobserve(img);
          }
        }
      });
    }, {
      rootMargin: '100px', // Увеличили до 100px для более агрессивной предзагрузки
      threshold: 0.1
    });
    
    function showGridImages() {
      const startIndex = (currentPage - 1) * imagesPerPage;
      const endIndex = startIndex + imagesPerPage;
      
      gallery.innerHTML = '';
      gallery.className = 'modern-gallery grid-mode';
      loadedImageCount = 0;
      
      // Создаем только нужные изображения для текущей страницы
      for (let i = startIndex; i < endIndex && i < totalImages; i++) {
        const imageNumber = i + 1;
        if (imageNumber === 42) continue; // Пропускаем image_42.webp
        
        const imageElement = createImageElement(imageNumber);
        gallery.appendChild(imageElement);
        
        // Наблюдаем за изображением для lazy loading
        const img = imageElement.querySelector('img');
        imageObserver.observe(img);
      }
      
      const totalPages = Math.ceil(totalImages / imagesPerPage);
      pageInfo.textContent = `Seite ${currentPage} von ${totalPages}`;
      
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages;
      pagination.style.display = 'block';
      
      // Обновить fancybox с оптимизированными настройками
      setTimeout(() => {
        if (typeof jQuery !== 'undefined' && jQuery.fancybox) {
          jQuery('[data-fancybox="gallery2"]').fancybox({
            arrows: true,
            infobar: false,
            smallBtn: true,
            toolbar: true,
            preload: [2, 2], // Предзагружать по 2 изображения в каждую сторону
            animationEffect: 'fade',
            animationDuration: 300,
            transitionEffect: 'slide',
            transitionDuration: 300
          });
        }
      }, 50); // Уменьшили задержку
    }
    
    prevBtn.addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        showGridImages();
      }
    });
    
    nextBtn.addEventListener('click', () => {
      const totalPages = Math.ceil(totalImages / imagesPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        showGridImages();
      }
    });
    
    // Начинаем загрузку галереи сразу после DOM
    loader.style.display = 'none';
    gallery.style.display = 'grid';
    showGridImages();
  });
  
  // Быстрая прокрутка для навигации
  document.addEventListener('DOMContentLoaded', function() {
    // Найти все ссылки с якорями
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    
    function smoothScrollTo(targetPosition, duration = 600) {
      const startPosition = window.pageYOffset;
      const distance = targetPosition - startPosition;
      let startTime = null;

      function animation(currentTime) {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const run = ease(timeElapsed, startPosition, distance, duration);
        window.scrollTo(0, run);
        if (timeElapsed < duration) requestAnimationFrame(animation);
      }

      // Easing function for smooth animation
      function ease(t, b, c, d) {
        t /= d / 2;
        if (t < 1) return c / 2 * t * t + b;
        t--;
        return -c / 2 * (t * (t - 2) - 1) + b;
      }

      requestAnimationFrame(animation);
    }
    
    anchorLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          // Быстрая прокрутка с небольшим offset для header
          const headerHeight = document.querySelector('.head')?.offsetHeight || 80;
          const targetPosition = targetElement.offsetTop - headerHeight;
          
          // Используем кастомную быструю анимацию
          smoothScrollTo(targetPosition, 400); // 400ms вместо стандартных медленных
        }
      });
    });
  });
</script>

      <section class="info">
        <div class="contain" id="Kontakt">
          <h2 class="h2">Zufriedene Kunden sind unser bester Beweis</h2>
          <p>Teilen Sie Ihre Erfahrung mit anderen und helfen Sie uns, noch besser zu werden.</p>
          <a href="https://g.page/r/CZk_BZnPcSqHEB0/review" class="info__btn btn">Google Bewertung abgeben</a>
        </div>
      </section>
<section class="sform" id="Kontakt">
  <div class="contain contain-2">
    <div class="sform__wrap">
      <div class="contain">
        <div class="sform__left">
          <h2 class="sform__title" id="contact-form-title">Beratung anfragen</h2>

          <!-- Форма с интеграцией Formspree -->
          <form id="fs-frm" name="simple-contact-form" accept-charset="utf-8" action="https://formspree.io/f/xoqznyqb" method="post" class="sform__form" role="form" aria-labelledby="contact-form-title">
            <div class="sform__inputs">
              <div class="sform__input-w">
                <label for="full-name" class="sr-only form-required">Name</label>
                <input class="sform__input" type="text" name="name" id="full-name" placeholder="Name" required aria-required="true" aria-describedby="name-error">
              </div>
              <div class="sform__input-w">
                <label for="email-address" class="sr-only form-required">E-Mail-Adresse</label>
                <input class="sform__input" type="email" name="_replyto" id="email-address" placeholder="Email" required aria-required="true" aria-describedby="email-error">
              </div>
            </div>

            <label for="message" class="sr-only form-required">Nachricht</label>
            <textarea name="message" id="message" rows="5" placeholder="Nachricht" required aria-required="true" aria-describedby="message-error"></textarea>

            <!-- Скрытое поле для темы письма -->
            <input type="hidden" name="_subject" id="email-subject" value="EMail von gartenbauzm.de">

            <!-- Чекбокс согласия GDPR -->
            <div class="sform__consent">
              <label style="display: flex; align-items: flex-start; gap: 10px; font-size: 14px; line-height: 1.4;">
                <input type="checkbox" name="consent" required style="margin-top: 2px; flex-shrink: 0;">
                <span>Ich stimme der Verarbeitung meiner Daten gemäß der <a href="/datenschutz.html" target="_blank" style="color: #459d72; text-decoration: underline;">Datenschutzerklärung</a> zu.</span>
              </label>
            </div>

            <button type="submit" class="btn" aria-describedby="submit-info">Nachricht senden</button>
            <div id="submit-info" class="sr-only">Formular wird an unsere E-Mail-Adresse gesendet</div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
    </main>
    <footer class="footer" role="contentinfo">
      <div class="contain">
        <div class="footer__top">
          <div class="footer__brand">
            <picture>
              <source srcset="img/logo.webp" type="image/webp">
              <img src="img/logo.png" class="footer__logo" alt="Gartenbau Z.M. Logo" loading="lazy">
            </picture>
            <div>
              <div class="footer__title">Gartenbau Z.M.</div>
              <p style="color: #6c757d; margin: 0;">Ihr Partner für Garten- und Landschaftsbau</p>
            </div>
          </div>
          
          <div class="footer__contact">
            <h4 style="color: #ffffff; margin-bottom: 1rem;">Kontakt</h4>
            <p>📍 Lerchenrain 9<br>71686 Remseck am Neckar</p>
            <p>📞 <a href="tel:+491782747470">+49 178 2747470</a></p>
            <p>📧 <a href="mailto:info.gartenbauzm@gmx.de">info.gartenbauzm@gmx.de</a></p>
            <p>💬 <a href="https://wa.me/+491782747470">WhatsApp Chat</a></p>
          </div>
          
          <div class="footer__services">
            <h4 style="color: #ffffff; margin-bottom: 1rem;">Servicegebiet</h4>
            <p>🌿 Stuttgart</p>
            <p>🌿 Remseck am Neckar</p>
            <p>🌿 Ludwigsburg</p>
            <p>🌿 Waiblingen</p>
            <p>🌿 Kornwestheim</p>
            <p>🌿 Fellbach</p>
          </div>
        </div>
        
        <div class="footer__bottom">
          <p>&copy; 2024 Gartenbau Z.M. | Alle Rechte vorbehalten</p>
          <div style="margin-top: 1rem;">
            <a href="/impressum.html" style="color: #6c757d; margin-right: 1rem;">Impressum</a>
            <a href="/datenschutz.html" style="color: #6c757d; margin-right: 1rem;">Datenschutz</a>
            <a href="#Kontakt" style="color: #6c757d;">Kontakt</a>
          </div>
        </div>
        
        <a href="#top" style="position: fixed; bottom: 2rem; right: 2rem; background: var(--primary-green); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; box-shadow: 0 4px 20px rgba(45, 90, 61, 0.3); transition: all 0.3s ease;" aria-label="Nach oben scrollen">↑</a>    
      </div>
    </footer>
  </div>
  <!--wrapper-->

  <!-- Async load scripts для лучшей производительности -->
  <script>
    // Modern browser feature detection
    function detectWebPSupport() {
      const webP = new Image();
      webP.onload = webP.onerror = function () {
        if (webP.height === 2) {
          document.documentElement.classList.add('webp');
        } else {
          document.documentElement.classList.add('no-webp');
        }
      };
      webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
    }
    
    // Critical path optimizations
    detectWebPSupport();
    
    // Header scroll effect
    window.addEventListener('scroll', function() {
      const header = document.querySelector('.head');
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });
    
    // Service Worker registration
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }

    // Load scripts asynchronously
    function loadScript(src, callback) {
      const script = document.createElement('script');
      script.src = src;
      script.async = true;
      if (callback) script.onload = callback;
      document.head.appendChild(script);
    }

    // Load jQuery first, then other scripts
    window.addEventListener('load', () => {
      loadScript('js/jquery-3.4.1.min.js', () => {
        loadScript('js/jquery.fancybox.min.js');
        loadScript('js/slick.js');
        loadScript('js/common.js');
      });
    });

    // Performance monitoring
    if ('PerformanceObserver' in window) {
      const observer = new PerformanceObserver((list) => {
        list.getEntries().forEach((entry) => {
          if (entry.entryType === 'largest-contentful-paint') {
            console.log('LCP:', entry.startTime);
          }
        });
      });
      observer.observe({entryTypes: ['largest-contentful-paint']});
    }
  </script>
</body>
</html>